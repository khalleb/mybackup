<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>

</h:head>
<h:body>
	<ui:composition template="/template/layout.xhtml">

		<ui:define name="content">
			<f:view contentType="text/html" />
			<h:form>
				<p:growl autoUpdate="true"></p:growl>
				<div id="Tabs" role="tabpanel">
					<!-- Nav tabs - MENU -->
					<ul class="nav nav-tabs" role="tablist">
						<li class="active"><a href="#postgresConfig"
							aria-controls="postgresConfig" role="tab" data-toggle="tab">#{msg['config.aba.postgres']}</a></li>
						<li><a href="#sobreSistema" aria-controls="sobreSistema"
							role="tab" data-toggle="tab">#{msg['config.aba.sobre']}</a></li>
					</ul>
					<!-- Body Pane Postgres -->
					<div class="tab-content">
						<div role="tabpanel" class="tab-pane active" id="postgresConfig">
							<div id="configDIVPostgres" class="container-fluid">

								<h4 class="page-header">#{msg['config.head.postgres']}</h4>

								<div class="row">
									<div class="form-group col-xs-12 input-group-md">
										<label>#{msg['config.pgdump']}</label>
										<p:inputText id="postgesPGDumpInput" class="form-control"
											required="false" requiredMessage="#{msg['persitir.pgdump']}"
											placeholder="#{msg['config.placeholder.pgdump']}"
											maxlength="60" value="#{backupCTRL.dataBackupTO.pgDump}">
											<f:validateLength maximum="60" minimum="5"></f:validateLength>
										</p:inputText>
									</div>
								</div>
								<div class="row">
									<div class="form-group col-md-4 input-group-md">
										<label>#{msg['config.host']}</label>
										<p:inputText id="postgresHostNameInput" class="form-control"
											required="false" requiredMessage="#{msg['persitir.host']}"
											placeholder="#{msg['config.placeholder.host']}"
											maxlength="15" value="#{backupCTRL.dataBackupTO.hostName}">
											<f:validateLength maximum="15" minimum="4"></f:validateLength>
										</p:inputText>
									</div>
									<div class="form-group col-md-4 input-group-md">
										<label>#{msg['config.porta']}</label>
										<p:inputText id="postgresPortaInput" class="form-control"
											required="false" requiredMessage="#{msg['persitir.porta']}"
											placeholder="#{msg['config.placeholder.porta']}"
											maxlength="5"
											value="#{backupCTRL.dataBackupTO.portaComunicacao}">
											<f:validateLength maximum="5" minimum="2"></f:validateLength>
										</p:inputText>
									</div>
									<div class="form-group col-md-4 input-group-md">
										<label>#{msg['config.nome.banco']}</label>
										<p:inputText id="postgresNomeBancoInput" class="form-control"
											required="false"
											requiredMessage="#{msg['persitir.nome.banco']}"
											placeholder="#{msg['config.placeholder.nome.banco']}"
											maxlength="20"
											value="#{backupCTRL.dataBackupTO.nomeDatabase}">
											<f:validateLength maximum="20" minimum="1"></f:validateLength>
										</p:inputText>
									</div>
								</div>
								<div class="row">
									<div class="form-group col-md-6 input-group-md">
										<label>#{msg['config.usuario']}</label>
										<p:inputText id="postgresUsuarioInput" class="form-control"
											required="false" requiredMessage="#{msg['persitir.usuario']}"
											placeholder="#{msg['config.placeholder.usuario']}"
											maxlength="40" value="#{backupCTRL.dataBackupTO.usuario}">
											<f:validateLength maximum="40" minimum="1"></f:validateLength>
										</p:inputText>
									</div>
									<div class="form-group col-md-6 input-group-md">
										<label>#{msg['config.senha']}</label>
										<p:password id="postgresSenhaInput" class="form-control"
											required="false" requiredMessage="#{msg['persitir.senha']}"
											placeholder="#{msg['config.placeholder.senha']}"
											redisplay="true" maxlength="40"
											value="#{backupCTRL.dataBackupTO.senha}">
											<f:validateLength maximum="40" minimum="1"></f:validateLength>
										</p:password>
									</div>
								</div>
							</div>
							<div id="configDIVPostgres" class="container-fluid">
								<h4 class="page-header">#{msg['config.local.backup']}</h4>
								<div class="row">
									<div class="form-group col-md-6 input-group-md">
										<label>#{msg['config.local.backup']}</label>
										<p:inputText id="backupLocalInput" class="form-control"
											required="false"
											requiredMessage="#{msg['persitir.local.backup']}"
											placeholder="#{msg['config.placeholder.local.backup']}"
											maxlength="60" value="#{backupCTRL.dataBackupTO.localBackup}">
											<f:validateLength maximum="60" minimum="3"></f:validateLength>
										</p:inputText>
									</div>
									<div class="form-group col-md-6 input-group-md">
										<label>#{msg['config.horario.backup']}</label>
										<p:inputMask id="localHoraInput" class="form-control"
											required="false"
											requiredMessage="#{msg['persitir.horario.backup']}"
											mask="99:99"
											validatorMessage="Verifique o formato da hora do backup"
											placeholder="#{msg['config.placeholder.horario.backup']}"
											maxlength="5"
											value="#{backupCTRL.dataBackupTO.horarioBackup}">
											<f:validateLength maximum="5" minimum="4"></f:validateLength>
											<f:validateRegex
												pattern="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"></f:validateRegex>
										</p:inputMask>
									</div>
								</div>
								<div class="row">
									<div class="form-group col-md-6 input-group-md">
										<label>#{msg['config.backup.nome']}</label>
										<p:inputText id="nomeBackupInput" class="form-control"
											required="false"
											requiredMessage="#{msg['persitir.nome.backup']}"
											placeholder="#{msg['config.placeholder.nome.backup']}"
											maxlength="60"
											value="#{backupCTRL.dataBackupTO.nomeArquivoBackup}">
											<f:validateLength maximum="60" minimum="2"></f:validateLength>
										</p:inputText>
									</div>
								</div>
								<div class="row">
									<div class="col-md-4 col-md-offset-4" style="padding: 15px">
										<h:commandLink id="btnAdicionarLista"
											value="#{msg['config.btn.adicionar-lista']}"
											styleClass="btn btn-success btn-md btn-block"
											action="#{backupCTRL.adicionarLista}">
											<span class="glyphicon glyphicon-plus-sign"></span>
										</h:commandLink>
									</div>
								</div>

							</div>


							<!-- ************** LISTA ************** -->
							<div class="row">
								<div class="form-group col-xs-12 input-group-md text-center">
									<h:outputText style="font-size:25px;" value="#{msg['config.lista.vazia']}" rendered="#{empty backupCTRL.listaDataBackupTO}" />
								</div>
							</div>
							<h:dataTable styleClass="table table-striped" rendered="#{not empty  backupCTRL.listaDataBackupTO}"
								var="listaDataBackupTO" value="#{backupCTRL.listaDataBackupTO}" >
								<h:column>
									<f:facet name="header">Nome do banco</f:facet>
									<h:outputText value="#{listaDataBackupTO.nomeDatabase}" />
								</h:column>

								<h:column>
									<f:facet name="header">Nome do Backup</f:facet>
									<h:outputText value="#{listaDataBackupTO.nomeArquivoBackup}" />
								</h:column>

								<h:column>
									<f:facet name="header">Horário</f:facet>
									<h:outputText value="#{listaDataBackupTO.horarioBackup}" />
								</h:column>

								<h:column>
									<f:facet name="header">Local do backup</f:facet>
									<h:outputText value="#{listaDataBackupTO.localBackup}" />
								</h:column>
								<h:column>
									<f:facet name="header">Ação</f:facet>
									<div>
										<div>
											<h:commandLink id="btnEditarItemLista"
												style="margin-right:10px" type="button" title="Editar"
												action="#{backupCTRL.editarItemLista(listaDataBackupTO)}"
												styleClass="btn btn-primary">
												<span class="glyphicon glyphicon-pencil"></span>
											</h:commandLink>
											<h:commandLink id="btnExcluirItemLista" type="button"
												title="Excluir"
												action="#{backupCTRL.removerItemLista(listaDataBackupTO)}"
												styleClass="btn btn-danger">
												<span class="glyphicon glyphicon-trash"></span>
											</h:commandLink>
										</div>
									</div>
								</h:column>
							</h:dataTable>
						</div>

						<!-- ************** SOBRE ************** -->
						<div role="tabpanel" class="tab-pane" id="sobreSistema">
							<div id="sobreSistema" class="container-fluid">
								<div class="text-center" style="margin-top: 35px;">
									<div>
										<img src="../resources/images/chucknorris_certificate.png"
											alt="chuckNorris" class="img-responsive center-block" />
									</div>
									<div style="margin-top: 50px;">
										<h1>#{msg['sistema.nome']}</h1>
										<h3>#{msg['sistema.versao']}</h3>
									</div>
									<div>
									<a href="https://github.com/khalleb/mybackupX" target="_blank"><img src="../resources/images/github-icone.png" alt="gitHub-icone" class="img-responsive center-block" height="281" width="104"/></a>
									
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- ************** BOTÕES ************** -->
				<div>
					<div class="navbar navbar-default navbar-fixed-bottom">
						<div class="container">
							<div class="row">
								<div class="col-md-3 col-md-offset-2" style="padding: 5px">
									<div>
										<div class="row"></div>
										<h:commandLink id="btnBackupManual"
											value="#{msg['config.btn.backup.manual']}"
											styleClass="btn btn-success btn-lg btn-block"
											action="#{backupCTRL.backup}">
											<span class="glyphicon glyphicon-hdd"></span>
										</h:commandLink>
									</div>
								</div>
								<div class="col-md-3 col-md-offset-2" style="padding: 5px">
									<div>
										<div class="row"></div>
										<h:commandLink id="btnSalvarConfiguracoe"
											value="#{msg['config.btn.salvar']}"
											styleClass="btn btn-success btn-lg btn-block"
											action="#{backupCTRL.salvar}">
											<span class="glyphicon glyphicon-floppy-disk"></span>
										</h:commandLink>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</h:form>
		</ui:define>

	</ui:composition>
</h:body>
</html>